# Configuring Gadget.yml

GadgetCLI's function is built around the gadget.yml configuration file. This is where you define the container's resources, issue commands once a container is started and state what containers to run and in what order. 

From here on out "host" refers to the Gadget compatible hardware running GadgetOS and "host computer" refers to the computer the Gadget compatible hardware is plugged into via USB.

Starting from the top of the file, here is what each section of gadget.yml does. 

```
spec: "0.0" #for future versioning
name: blink #generated from .yml file's parent directory 
type: docker 
```

## Onboot and Services

There are two sections to place and define containers in: **onboot** and **services**. 


### onboot:

Containers added to the **onboot** section run after boot, then exit. They run before containers placed in **services** and when multiple containers are defined they run sequentially from top to bottom. 

Add a container to onboot:

`gadget add onboot projectname`
	
From parent directory:
	
`gadget -C blink add onboot projectname`


### services:

Containers defined under **services** run after containers listed in **onboot**. They are automatically restarted by Docker if it exits with a non-zero return code. 

### Configurations

**name** - Name of project

	Generated by `gadget add service|onboot imageName`. If you choose to edit this field after generation the container will need to be built and deployed again.
	
**uuid** - Unique container ID

	You can have several instances of the same image. You can identify these by their uuid. For example, on your host machine if you run: 
	`gadget shell`
	and run:
	`docker images`
	Several instances of an image which each of their uuids will show.
	
**image** - Pathname of Docker Hub image

	Generated by `gadget add service|onboot imageName`. Currently, it's format is: `parent_directory/projectname. 
	
**directory** - Pathname of local image

	Used when building and deploying images on your host machine. Put the pathname of your Dockerfile and supporting files (called the build's context) here in relation to the gadget.yml file.
	
**net** - 

**pid** - 

**readonly** - Set to false by default
**command** - Run this command at start
	
	For example, to run the executable myPythonScript.py as soon as the container starts ['myPythonScript.py'] 
	
**binds** - Mount a directory 
	
	Put any directories here that you would like to mount from the host into the container. 
	GadgetCLI does not enable you to disable the security labeling for a container with the `--privileged` flag.

**[capabilities](http://man7.org/linux/man-pages/man7/capabilities.7.html)** - Define Linux capabilities
	
	This is where specific Linux capabilities that bypass kernel permission checks get enabled.


**[devices](https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities)** - Grant access to devices
	
	Define and make a specific device accessible from inside a container.



General Rules

* When listing items in an array, surround each item with single quotes. For example:
	`binds: ['/sys:/sys']`
	`command: ['python', 'myScript.py']`
	
* By default, Docker containers are not allowed to access any devices and are "unprivileged". To access a device and get privileges to Linux capabilities they need to defined in `capabilities` and `devices`. Gadget does not promote nor enable operators to pass the `--privileged` flag to Docker's run command.




