# Configuring Gadget.yml

GadgetCLI's function is built around the gadget.yml configuration file. This is where you define the container's resources, issue commands once a container is started and state what containers to run and in what order. 

The gadget.yml file conveniently wraps us Docker commands, options and parameters all in one place. To learn more about what each configuration does on the Docker side click the title to be taken to Docker documentation.

From here on out "host" refers to the Gadget compatible hardware running GadgetOS and "host computer" refers to the computer the Gadget compatible hardware is plugged into via USB.

Starting from the top of the file, here is what each section of gadget.yml does. 

```
spec: "0.0" #for future versioning
name: blink #generated from .yml file's parent directory 
type: docker 
```

## Onboot and Services

There are two sections to place and define containers in: **onboot** and **services**. 


### Onboot

Containers added to the **onboot** section run after boot, then exit. They run before containers placed in **services** and when multiple containers are defined they run sequentially from top to bottom. 

Add a container to onboot:

```
gadget add onboot projectName
```
	
From parent directory:
	
```
gadget -C blink add onboot projectName
```


### Services

Containers defined under **services** run after containers listed in **onboot**. They are automatically restarted by Docker if it exits with a non-zero return code. 

Add a service:

```
gadget add service projectName
```
	
From parent directory:
	
```
gadget -C blink add service projectName
```

## Configurations

### Name: Name of project

Generated by the command:

```	
gadget add service|onboot projectName
``` 
	
If you choose to edit this field after generation the container will need to be built and deployed again.
	
### Uuid: Container ID

You can have several instances of the same image. These instances are identified by their uuid. For example, if you build an image then change the **command** configuration and build again you can see both instances on your host machine when you run:
	
```
docker images
```
	
### Image: Pathname of Docker Hub image

An entry for `image:` is generated when you use the command:

```
gadget add service|onboot imageName
```
	
It reads as: **parent_directory/projectname**
	
To pull a base image from Docker Hub edit it to read: **username/repo:tag**. Learn more about [Docker Hub](https://docs.docker.com/docker-hub/) and how to use it.
	
### Directory: Pathname of local image

Used when building and deploying images on your host machine rather than pulling from Docker Hub. Put the pathname of your Dockerfile and supporting files (called the build's context) here in relation to the gadget.yml file. 
	
<span style="font-size: 16px">**[Net:](https://docs.docker.com/engine/reference/run/#network-settings) Define which network to use or none**</span>

By default, all containers have networking enabled and can make outgoing connections. Use the following arguments to choose which network you would like the container use:

| Network                | Description                                                                             |
|------------------------|-----------------------------------------------------------------------------------------|
| none                   | No networking in the container.                                                         |
| bridge                 | Connect the container to the bridge via veth interfaces.                                |
| host                   | Use the host's network stack inside the container.                                      |
| container: <name | id> | Use the network stack or another container, specified via its __name__ or __id__        |
| NETWORK                | Connects the container to a use created network (using `docker network create` command) |



### Pid - 

### Readonly - Set to false by default
### Command - Run this command at start
	
For example, to run the executable myPythonScript.py as soon as the container starts ['myPythonScript.py'] 
	
### Binds - Mount a directory 
	
Put any directories here that you would like to mount from the host into the container. 

### [Capabilities](http://man7.org/linux/man-pages/man7/capabilities.7.html)** - Define Linux capabilities
	
This is where specific Linux capabilities that bypass kernel permission checks get enabled.


### [Devices](https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities)** - Grant access to devices
	
Define and make a specific device accessible from inside a container.



General Rules

* When listing items in an array, surround each item with single quotes. For example:
	`binds: ['/sys:/sys']`
	`command: ['python', 'myScript.py']`
	
* By default, Docker containers are not allowed to access any devices and are "unprivileged". To access a device and get privileges to Linux capabilities they need to defined in `capabilities` and `devices`. Gadget does not promote nor enable operators to pass the `--privileged` flag to Docker's run command.




